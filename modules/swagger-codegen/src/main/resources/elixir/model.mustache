defmodule {{#modulized}}{{appName}}{{/modulized}}.Model.{{classname}} do
  @moduledoc """
  Documentation for {{#modulized}}{{appName}}{{/modulized}}.Model.{{classname}}.
  """

  use Ecto.Schema

  @primary_key false

{{#models}}
{{#model}}
  schema "{{#underscored}}{{name}}{{/underscored}}" do
{{#vars}}
    field :{{#underscored}}{{name}}{{/underscored}}, {{datatype}}
{{/vars}}
  end

  def changeset({{#underscored}}{{name}}{{/underscored}}, params \\ %{}) do
    {{#underscored}}{{name}}{{/underscored}}
    |> Ecto.Changeset.cast(params, [{{#vars}}{{^-first}}, {{/-first}}:{{#underscored}}{{name}}{{/underscored}}{{/vars}}])
    # TODO add validations
  end
{{/model}}
{{/models}}
end
